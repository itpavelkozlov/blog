---
title: Старт блога. Подготовка к миграции. Часть 1
author: Pavel Kozlov
date: 2021-08-03 21:30:00 +0300
categories: [Blogging, Development, PET Project]
tags: [migration]
pin: true
---

Привет! Рад видеть тебя в своем блоге. Наконец то он стартовал, но ему уже пора совершить реинкарнацию и переродиться. Этот процесс миграции я хочу описать тут.

## Предыстория

Мне уже довольно давно импонирует тема с ведением просвятительской деятельности. Есть что то такое в этом. Рассказывать сложные штуки простым языком, вести блог, делиться знаниями, учавстовать в дебатах с комментаторами.

И я года 2 назад начал поиски идеального места для своего творчества. В результате взгляд пал на несколько платформ:

## Wordpress/Joomla и остальные конструкторы

Написано мамонтами на PHP (при чем с кучей дыр в безопасности). Выглядят устаревше. Темы все прямиком из 2000. Сложно добавить/исправить функционал (у меня ушло пару дней что бы на тестовом стенде, отображать посты наоборот. Не сначала старые, а внизу новые. А что бы по нормальному, сверху самые свежие записи, снизу что постарше. **Пару дней**). Кароче не вариант

## Социальные сети

* Youtube
    * Создание видеоконтента занимает много времени
    * Создавать видеоконтент сложно. То микрофон сел, то камера фокус потеряла
    * Есть цензура, и за слово `сосиська` если его невнятно произнести можно получить по лицу от Гугла
* vk.com
    * Контингент в основном - школьники, дрочиллы, барыги
    * Там такое не заходит. Порнушка и мемчки - да. Что то умное - нет
* Instagram
    * Еще большая нетерпимость к `сосиське`
    * Нужны красивые фотки, которые будут нравиться людям. Вам нравятся фотки из набитой маршрутки в подпосковье? Вот и мне нет. Идем дальше
* Одноклассники
    * Ты за кого меня принимаешь?!
* Телеграм
    * Форматирование сносное, но все равно не то
    * Вообще не понятно как продвигаться
    * Иногда бывает запрещен в России

Ну и общая боль всех соц.сетей - нельзя прикрепить хорошо оформленный код с подсветкой синтаксиса. Много где ограничение для длинну контента. Короче говоря - не тот формат

## Модные блоггинг платформы

* Хабр
    * Один мой друг сказал правильную вещь. На хабре умные люди статей не пишут. Все умные люди сидят в комментариях. И знают как лучше делать. Если серьезно, бывает интереснее читать комментарии "знатоков", чем сам пост. Очень токсичная аудитория
    * После первого поста заминусуют так, что карму не отмоешь. Нужны стальные яйца и куча времени что бы бороться с этим сопротивлением
* Медиум и ему подобные
    * С некоторых пор, что бы почитать, будть добр, плати. Это спугнуло и без того скудную аудиторию с ресурса

## Самописное решение

Про скилы я расскажу попозже, но если в кратце - я умею довольно хорошо писать сервверную часть. Нелохо все это дело заворачивать в контейнеры и деполить. И более менее нормально могу в клиентскую часть. Тем более моя любимая жена - дизайнер. Идеальный тандем, подумал я и решил написать все сам, с нуля. 

Спойлер: решил примерно 5 раз

## Почему ~~обосрался~~ отказался от этой идеи, какие ошибки я допустил и к чему пришел в итоге

### Заход нулевой

Не зная программирования, я решил наклепать свой блог. Нашел такую платформу как wordpress. Написано на PHP, как раз будет шанс научиться основам языка! Оплатил хостинг на год, купил домен, SSL сертификат, по гайдам все это запустил. Скачал с торрента курс по PHP. Начал смотреть, ничего не понял, и отказался от PHP. В этот блог я кстати не выложил ни 1 поста :(

> Ошибка - переоценил себя и прыгнул выше головы. Сначала курс, потом простые задачки, потом wordpress - было бы ок. А когда тебя кинули в воду и сказали "плыви" - такое не всегда срабатывает.

### Заход первый

Когда я учился программированию, нас учили Python + Django. Та самая обычная джанга, которая без фронта рендерит шаблоны на основе json и отдает html файлики. 

Угадаете какой был мой первый проект? ***personal blog***

Я по незнанию нагородил там дичайшего говнокода, который, спустя время не смог понять даже сам. Пытался отрефакторить/переписать нормально, но все сломалось и идея была отложена в долгий ящик. А затем удалена.

> Ошибка - слишком мало опыта написания хорошего кода. Надо было в то время решать задачки на "разверни список", "найди анограмму" и т.д., а не стартовать большой проект. Тут стоит уточнить, если есть ментор или более опытный товарищь, который готов проводить ревью, стартовать можно, и старт будет крутой. В одного - не стоит.

### Заход второй

Когда я работал в стартапе, я писал на Python + Django Rest Framework. На фронте был Vue (Обернутый в Nuxt.JS). База данных была postgres.

Я пытался реализовать блог по образу и подобию. копировал конфиг файлы, подглядывал в тот код. В итоге я сделал в БД простейшую схемку схемку Пост -> Комментарии, сделал простейший фронт (без верстки, просто запустил проект и добавил CRUD), закоммитил и запушил это дело на gitlab (именно он у нас использовался). Кажется все шло хорошо. 

Но я на неделю упоролся какой то левой движухой - я стал настраивать бейджи на gitlabe, добавил workerов, которые собирают мой проект в package. Начал вкручивать pgbouncer (это балансировщик нагрузки для postgres). Я не знаю зачем я его добавлял, может быть настолько верил в успех блога, что заранее закладывал огромную пропускную способность. И все в таком духе.

В конце концов, эти репозитории пролежали полгода на гитлабе и были удалены. Просто отпало желание что-то там делать.

> Ошибка - не было четкого тз. Я не знал какой следующий шаг выбрать из множества, и поэтому начал заниматься 80% процентов времени совершенно ненужными штуками. После этого не увидел прогресса и мотивация пропала. Надо было сделать ТЗ и вести таск трекер. Все эти темы со спринтами не зря придумали и используют повсеместно.

### Заход третий

Я начал изучать Go. И решил для ускорения обучения применять все полученные знания в реальном проекте. Прокте под названием ***my_blog***.

Я захотел написать все без использования фреймворков и библиотек. Чисто на стандартной библиотеке языка go с использованием сырых SQL запросов. Со 100% покрытия тестами, бенчмарками, свистелками, перделками. Накидал двухстейджевый билд в Dockerfile. Написал Dockercompose. Сделал веб сервер, который выводит `hello world` (покрыл тестами старт сервера и единственный handler), настроил CI для оповещения об успешном билде меня в telegram. 

Затем пару недель у меня не было времени возвращаться к проекту, а когда вернулся, понял что все очень сложно, и для добавления новых фич с соблюдением заданного мной кодстайла, требуется много времени и усилий. Я не захотел делать дальше и удалил проект.

> Ошибка - слишком усложнил себе жизнь, избегая библиотек, которые призваны ее упростить. При чем сделал это неоправданно. Тут же и ошибка что не было ТЗ, что плохо знал архитектуру приложений на Golang. 

### Заход четвертый

Я сменил работу, и впревые столкнулся в GraphQL, MongoDB и Domain Driven Design. За месяца 3 я вкурил всю эту тему, проникся философией и решил сделать проект для закрепления. В качестве проекта я выбрал блог (ого, нихуясе).

Вкрутил все эти модные и хипстерские технологии, создал таск-трекер в Trello, расписал в Notion документацию (благодаря таскам и доке, проект прожил дольше своих собратьев, это реально помогает) и начал кодить.

Все было хорошо, но это полностью повторяло рабочий стек. И я понимал что в будни днем я делаю тоже самое, что вечером и в выходные. Меня начало напрягать это бездумное клепание одного и тогоже. Плюс если я понимал что ошибся в рабочем проекте, приходилось фиксить это и в своем pet project. Занимался я этим недели 2 в лайт режиме. Потом пришло понимание что тошнит от всего этого, надоело до нельзя. Я все свернул.

> Ошибка - в проекте не было для меня ничего нового. Это была мини копия рабочего проекта, поэтому пропал интерес.

## Как оно сделано сейчас

Какое то время я вел инстаграм. Потом завел еще один. Параллельно снимал на ютуб. Все это не то. Душа лежала к блогу в текстовом виде. И я наткнулся на генераторы статических блогов.

### Что это и как работает

Создаешь новый проект. Находишь и ставишь тему. Весь контент пишешь локально на компьютере, на языке разметки Markdown, делаешь commit -> push на гитхаб. В github actions настроено так, что генератор собирает весь сайт в html+css+js файлик и публикует на github pages. Таким образом это позволяет обходиться без backend части, без базы данных и не думать о безопасности. По сути это статический контент, который довольно быстро отдается сервером.

### Какие пробовал

- Hugo. Быстрый, модный, молодежный, написал на языке Go. Сначала взял его. Все круто, но нормальную тему для него я так и не нашел. Все либо не красивых, либо не подходят под технарский блог
- Jekyll. Написан на языке Ruby. Сейчас блог работает на нем. Тем побольше, есть платные, есть бесплатные.

### Какие минусы обнаружил

- Неудобно добавлять/изменять контент. Приходится пулить на комп весь проект, править, пушить, дожидаться CI/CD.
- Не добавить серверной логики (авторизации, метрик, просмотров, комментариев, реакций и прочего динамически меняющегося контента). Можно, но это будет очень запаристо, через сторонние сервисы типа Disqus, и возможно платно.
- Нет возможности ~~костылизировать~~ кастомизировать сайт. Не поменять особо стили (можно настроить только то, что даст настроить автор темы). Я так и не смог поправить некоторые баги. Например мне не нужны иконки твиттера в меню, а они есть. Я хочу поменять иконку, но опять же не нашел как это сделать. Перевести на русский страницу с 404 ошибкой тоже не получилось.
- Это довольно гибкое решение, но не твое. Ты не имеешь полноценной власти над проектом. Нельзя впилить закрытый контент для зарегестрированных пользователей, нельзя ничего продать. Тем более я не владею языком ruby, и не знаю что происходит на этапе сборки приложения.
- Статические сайты это середина 2000х годов и совсем не модная технология. А я хочу быть на пике стека.

## Решение

Я решил отправиться в еще один заход и сделать самописное решение. MVP блога будет повторять текущий функционал. Но будет написано мной, с использованием базы данных, серверной бекенд части, фронтенда, все как полагается.

### Какие боли я решу

- Контент можно будет добавить и поправить через админку. Хоть с телефона из маршрутки, хоть в компьютера. И он моментально отобразится
- Полноценная база данных даст возможность поиска, удобного хранения, бекапов
- Темы будут самописные и я смогу менять их как захочу
- Никакого ruby, только go + js и немного девопсовской темы

### Как не повторить ошибки прошлых блогов и не бросить

- Я знаю что делать. У меня есть полноценный дизайн и работающий сайт, который надо реализовать на современном стеке. Никаких новых фич. Просто сделать нормально то что есть сейчас. Я полностью опишу ТЗ и вперед, кодировать. (никак не наоборот!)
- Я довольно хорошо знаю язык, и вряд ли столкнусь с тем, что при написании блога, у меня будут сложности, из-за которых я все брошу
- Я буду вести таск-трекер и документацию. Это реально помогает
- Я не буду использовать стек, который я знаю. Возьму новые для себя библиотеки, фреймворки, с которыми работал давно/мало/не работал совсем. Скорее всего это будет REST + реляционная база данных + VUE 3. Это поможет подкачать скилы, пополнить портфолио и не даст скучать 
- Хостинг и домен я куплю когда проект будет полностью готов, и все статьи отсюда переедут туда. Для пользователя это будет незаметно, но в плане разработки - это будет революционная магия :)

## Заключение

Весь код я планирую выложить в открытом доступе. Процесс разработки и ощущения буду публиковать тут. Если ты, мой дорогой читатель решишь запустить этот блог у себя и тоже вести - я буду не против. Если решишь внести улучшения/изменения - я тоже буду только рад. Я думаю это будет прикольное путешествие, и сработает как "жвачка для мозга".